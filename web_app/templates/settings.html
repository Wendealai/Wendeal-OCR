{% extends "base.html" %}

{% block title %}设置 - Zerox OCR{% endblock %}

{% block content %}
<div class="row">
    <div class="col-lg-8 mx-auto">
        <div class="card shadow-sm">
            <div class="card-header bg-info text-white">
                <h5 class="card-title mb-0">
                    <i class="bi bi-gear me-2"></i>系统设置
                </h5>
            </div>
            <div class="card-body">
                <!-- API密钥配置 -->
                <div class="mb-4">
                    <h6 class="mb-3">
                        <i class="bi bi-key me-2"></i>API密钥配置
                    </h6>
                    
                    <!-- OpenAI API -->
                    <div class="mb-3">
                        <label for="openaiKey" class="form-label">
                            <strong>OpenAI API Key</strong>
                            <span class="badge bg-success ms-2" id="openaiStatus">已配置</span>
                        </label>
                        <div class="input-group">
                            <input type="password" class="form-control" id="openaiKey" 
                                   placeholder="sk-xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx">
                            <button class="btn btn-outline-secondary" type="button" id="toggleOpenai">
                                <i class="bi bi-eye"></i>
                            </button>
                            <button class="btn btn-primary" type="button" id="saveOpenai">保存</button>
                        </div>
                        <small class="text-muted">用于GPT-4 Omni、GPT-4 Omni Mini模型</small>
                    </div>

                    <!-- Google Gemini API -->
                    <div class="mb-3">
                        <label for="geminiKey" class="form-label">
                            <strong>Google Gemini API Key</strong>
                            <span class="badge bg-secondary ms-2" id="geminiStatus">未配置</span>
                        </label>
                        <div class="input-group">
                            <input type="password" class="form-control" id="geminiKey" 
                                   placeholder="AIzaSyxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx">
                            <button class="btn btn-outline-secondary" type="button" id="toggleGemini">
                                <i class="bi bi-eye"></i>
                            </button>
                            <button class="btn btn-primary" type="button" id="saveGemini">保存</button>
                        </div>
                        <small class="text-muted">用于Gemini 1.5 Pro、Gemini 1.5 Flash、Gemini Pro Vision模型</small>
                    </div>

                    <!-- Azure OpenAI API -->
                    <div class="mb-3">
                        <label for="azureKey" class="form-label">
                            <strong>Azure OpenAI API Key</strong>
                            <span class="badge bg-secondary ms-2" id="azureStatus">未配置</span>
                        </label>
                        <div class="input-group">
                            <input type="password" class="form-control" id="azureKey" 
                                   placeholder="xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx">
                            <button class="btn btn-outline-secondary" type="button" id="toggleAzure">
                                <i class="bi bi-eye"></i>
                            </button>
                            <button class="btn btn-primary" type="button" id="saveAzure">保存</button>
                        </div>
                        <small class="text-muted">用于Azure GPT-4 Omni、Azure GPT-4 Omni Mini模型</small>
                    </div>
                </div>

                <hr>

                <!-- 系统配置 -->
                <div class="mb-4">
                    <h6 class="mb-3">
                        <i class="bi bi-sliders me-2"></i>系统配置
                    </h6>
                    
                    <div class="row">
                        <div class="col-md-6">
                            <div class="mb-3">
                                <label for="defaultModel" class="form-label">默认AI模型</label>
                                <select class="form-select" id="defaultModel">
                                    <option value="gpt-4o">GPT-4 Omni</option>
                                    <option value="gpt-4o-mini">GPT-4 Omni Mini</option>
                                    <option value="gemini/gemini-1.5-pro">Gemini 1.5 Pro</option>
                                    <option value="gemini/gemini-1.5-flash">Gemini 1.5 Flash</option>
                                </select>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="mb-3">
                                <label for="maxFileSize" class="form-label">最大文件大小 (MB)</label>
                                <input type="number" class="form-control" id="maxFileSize" value="50" min="1" max="100">
                            </div>
                        </div>
                    </div>

                    <div class="row">
                        <div class="col-md-6">
                            <div class="mb-3">
                                <label for="defaultConcurrency" class="form-label">默认并发数</label>
                                <input type="number" class="form-control" id="defaultConcurrency" value="10" min="1" max="20">
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="mb-3">
                                <div class="form-check form-switch mt-4">
                                    <input class="form-check-input" type="checkbox" id="autoCleanup" checked>
                                    <label class="form-check-label" for="autoCleanup">
                                        自动清理临时文件
                                    </label>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <hr>

                <!-- 界面设置 -->
                <div class="mb-4">
                    <h6 class="mb-3">
                        <i class="bi bi-palette me-2"></i>界面设置
                    </h6>
                    
                    <div class="row">
                        <div class="col-md-6">
                            <div class="mb-3">
                                <label for="theme" class="form-label">主题</label>
                                <select class="form-select" id="theme">
                                    <option value="light">浅色主题</option>
                                    <option value="dark">深色主题</option>
                                    <option value="auto">跟随系统</option>
                                </select>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="mb-3">
                                <label for="language" class="form-label">语言</label>
                                <select class="form-select" id="language">
                                    <option value="zh-CN">简体中文</option>
                                    <option value="en-US">English</option>
                                </select>
                            </div>
                        </div>
                    </div>

                    <div class="mb-3">
                        <div class="form-check form-switch">
                            <input class="form-check-input" type="checkbox" id="enableAnimations" checked>
                            <label class="form-check-label" for="enableAnimations">
                                启用动画效果
                            </label>
                        </div>
                    </div>
                </div>

                <hr>

                <!-- 操作按钮 -->
                <div class="d-flex justify-content-between">
                    <div>
                        <button class="btn btn-success" id="saveSettings">
                            <i class="bi bi-check-circle me-2"></i>保存所有设置
                        </button>
                        <button class="btn btn-outline-secondary ms-2" id="resetSettings">
                            <i class="bi bi-arrow-clockwise me-2"></i>重置为默认
                        </button>
                    </div>
                    <div>
                        <button class="btn btn-outline-info" id="testConnection">
                            <i class="bi bi-wifi me-2"></i>测试连接
                        </button>
                        <button class="btn btn-outline-danger ms-2" id="clearData">
                            <i class="bi bi-trash me-2"></i>清除数据
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- 系统信息 -->
        <div class="card shadow-sm mt-4">
            <div class="card-header bg-secondary text-white">
                <h6 class="card-title mb-0">
                    <i class="bi bi-info-circle me-2"></i>系统信息
                </h6>
            </div>
            <div class="card-body">
                <div class="row text-center">
                    <div class="col-md-3">
                        <div class="h5 text-primary" id="totalProcessed">0</div>
                        <small class="text-muted">总处理文件</small>
                    </div>
                    <div class="col-md-3">
                        <div class="h5 text-success" id="successRate">0%</div>
                        <small class="text-muted">成功率</small>
                    </div>
                    <div class="col-md-3">
                        <div class="h5 text-info" id="totalTokens">0</div>
                        <small class="text-muted">总Token消耗</small>
                    </div>
                    <div class="col-md-3">
                        <div class="h5 text-warning" id="storageUsed">0MB</div>
                        <small class="text-muted">存储使用</small>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script src="{{ url_for('static', filename='js/settings.js') }}"></script>
{% endblock %}
